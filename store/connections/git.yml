id: git
name: Git
description: Access git servers securely through Hoop using SSH. This integration enables secure git operations, repository management, and git server resource access through the Hoop proxy with complete audit trails and access controls. Works with GitHub, GitLab, Gitea, Forgejo, and any SSH-based git server.
category: infrastructure-access
icon-name: git
tags:
  - git
  - scm
  - security
  - cli
overview:
  description: Access git servers securely through Hoop using SSH. This integration enables secure git operations, repository management, and git server resource access through the Hoop proxy with complete audit trails and access controls. Works with GitHub, GitLab, Gitea, Forgejo, and any SSH-based git server.
setupGuide:
  accessMethods:
    webapp: false
    cli: true
    native: true
    runbooks: false
resourceConfiguration:
  type: application
  subtype: git
  credentials:
    - name: HOST
      type: env-var
      required: true
      description: The git server SSH host address (e.g., github.com, gitlab.com, gitea.example.com)
      placeholder: github.com
    - name: USER
      type: env-var
      required: true
      description: The git server SSH user (typically 'git' for most servers)
      placeholder: git
    - name: AUTHORIZED_SERVER_KEYS
      type: env-var
      required: true
      description: The private SSH key for authenticating with the git server. Must be registered with your git server account.
      placeholder: Enter your git server SSH private key
documentationConfig:
  path: quickstart/cloud-services/git
features:
  tlsTerminationProxy:
    native: true
    oneOff: false
  audit:
    native: true
    oneOff: false
  dataMaskingGoogleDLP:
    native: false
    oneOff: false
  dataMaskingMSPresidio:
    native: false
    oneOff: false
  guardrails:
    native: false
    oneOff: true
  credentialsOffload:
    native: true
    oneOff: false
  interactiveAccess:
    native: true
    oneOff: false
additionalInformation: |
  ## SSH Key Setup

  To access git servers through Hoop, you need an SSH key registered with your git server account. This works with GitHub, GitLab, Gitea, Forgejo, and any SSH-based git server.

  ### Generate SSH Key (if you don't have one)

  ```sh
  ssh-keygen -t rsa -b 4096 -f ~/.ssh/git_key -N ""
  ```

  ### Register Key with Your Git Server

  **GitHub:**
  - Go to GitHub Settings → SSH and GPG keys → New SSH key
  - Paste your public key
  - Give it a name (e.g., "Hoop Git Access")
  - Click "Add SSH key"

  **GitLab:**
  - Go to GitLab Settings → SSH Keys
  - Paste your public key
  - Set expiration date if needed
  - Click "Add key"

  **Gitea/Forgejo:**
  - Go to Settings → SSH/GPG Keys
  - Click "Add Key"
  - Paste your public key

  ### Display Your Public Key

  ```sh
  cat ~/.ssh/git_key.pub
  ```

  ### Create Connection with Hoop

  ```sh
  # For GitHub
  hoop admin create conn github -a <agent> --overwrite \
      --type application/git \
      -e HOST=github.com \
      -e USER=git \
      -e AUTHORIZED_SERVER_KEYS=file://~/.ssh/git_key

  # For GitLab
  hoop admin create conn gitlab -a <agent> --overwrite \
      --type application/git \
      -e HOST=gitlab.com \
      -e USER=git \
      -e AUTHORIZED_SERVER_KEYS=file://~/.ssh/git_key

  # For self-hosted Gitea/Forgejo
  hoop admin create conn gitea -a <agent> --overwrite \
      --type application/git \
      -e HOST=git.example.com \
      -e USER=git \
      -e AUTHORIZED_SERVER_KEYS=file://~/.ssh/git_key
  ```

  ## How to Use it

  Once configured, you can use git operations through Hoop:

  ```bash
  hoop connect github
  ```

  This opens an SSH proxy on a local port that routes all traffic through Hoop, allowing you to:

  - Clone repositories: `git clone <repo-url>`
  - Push/pull changes: `git push`, `git pull`
  - Perform any SSH-based git operation

  ## Advanced Usage

  ### Port Forwarding

  To use a specific port:

  ```bash
  hoop connect github --port 2222
  ```

  Then use git with the custom host and port:

  ```bash
  # Using explicit port configuration
  GIT_SSH_COMMAND="ssh -p 2222" git clone git@localhost:org/repo.git
  ```

  ### Git Configuration

  For seamless git operations with Hoop, you can configure your local git client:

  ```bash
  # Clone with port forwarding
  hoop connect github --port 2222 &
  GIT_SSH_COMMAND="ssh -p 2222" git clone git@localhost:my-org/my-repo.git
  ```

  <Tip>
    Enable the `--debug` flag when running `hoop connect` to troubleshoot SSH connection issues. This provides detailed information about the connection process and any authentication problems.
  </Tip>

  For more details, refer to the [environment variables documentation](/setup/configuration/env-vars).
