---
title: "Secure Shell (SSH)"
description: "A cryptographic network protocol for operating network services securely over an unsecured network, commonly used for remote command-line login."
category: "infrastructure-access"
---

import { ConnectionTemplate } from '/snippets/connection-template.jsx';

<ConnectionTemplate config={{
  "resourceConfiguration": {
    "type": "application",
    "subtype": "ssh",
    "credentials": [
      {
        "name": "HOST",
        "type": "env-var",
        "required": true,
        "description": "The IP or hostname of the SSH server",
        "placeholder": "localhost"
      },
      {
        "name": "PORT",
        "type": "env-var",
        "required": false,
        "description": "The port of the SSH server, default to 22",
        "placeholder": "22"
      },
      {
        "name": "USER",
        "type": "env-var",
        "required": true,
        "description": "The username of the Linux server",
        "placeholder": "ubuntu"
      },
      {
        "name": "PASS",
        "type": "env-var",
        "required": false,
        "description": "The credentials of the username if password authentication is enabled in the SSH server.",
        "placeholder": "password"
      },
      {
        "name": "AUTHORIZED_SERVER_KEYS",
        "type": "env-var",
        "required": false,
        "description": "The private key of the user that corresponds to the public key at $HOME/<user>/.ssh/authorized_keys",
        "placeholder": "Enter your private key"
      }
    ]
  },
  "id": "ssh",
  "name": "Secure Shell (SSH)",
  "description": "A cryptographic network protocol for operating network services securely over an unsecured network, commonly used for remote command-line login.",
  "category": "infrastructure-access",
  "icon-name": "ssh",
  "tags": [
    "remote-access",
    "secure",
    "terminal",
    "unix"
  ],
  "overview": {
    "description": "Access your servers securely through Hoop.dev with comprehensive SSH session recording, intelligent command monitoring, and automated access controls. Connect to remote hosts with complete audit trails, data masking capabilities, and built-in security guardrails that eliminate the need for traditional VPN access."
  },
  "setupGuide": {
    "accessMethods": {
      "webapp": false,
      "cli": true,
      "runbooks": false
    }
  },
  "documentationConfig": {
    "path": "quickstart/ssh"
  },
  "features": {
    "tlsTerminationProxy": {
      "native": true,
      "oneOff": false
    },
    "audit": {
      "native": false,
      "oneOff": false
    },
    "dataMaskingGoogleDLP": {
      "native": false,
      "oneOff": false
    },
    "dataMaskingMSPresidio": {
      "native": false,
      "oneOff": false
    },
    "credentialsOffload": {
      "native": true,
      "oneOff": false
    },
    "interactiveAccess": {
      "native": true,
      "oneOff": false
    }
  }
}} />


## Connection Setup

```sh
# ssh server must enable password based authentication
hoop admin create conn myremote-server -a <agent> --overwrite \
    --type application/ssh \
    -e HOST=10.20.30.40 \
    -e USER=root \
    -e PASS=myrootpasswd

# ssh server must enable public key authentication
hoop admin create conn myremote-server -a <agent> --overwrite \
    --type application/ssh \
    -e HOST=10.20.30.40 \
    -e USER=root \
    -e AUTHORIZED_SERVER_KEYS=file:///path/to/your/private/key
```

## How to Use it

To connect automatically, it will listen to a random port and use your local `ssh` client to connect it.

```bash
hoop connect myremote-server
```

In the listen mode, it will listen for connections on the specified port when using the `--port` flag.

```bash
hoop connect myremote-server --port 2222
```

Connect with your local SSH client using another terminal window:

```bash
ssh -p 2222 localhost
```

## SSH Hosts Key

To prevent fingerprint issues when connecting with the local SSH client server,
add the client host key environment variable during gateway setup.

The key must be in `PKCS#8` format and encoded as base64. You can generate a key with `openssl` utility:

```bash
openssl genpkey -algorithm RSA -out ssh_host_hoop_key.pem \
  -pkeyopt rsa_keygen_bits:4096
base64 -i ssh_host_hoop_key.pem
```

- `SSH_CLIENT_HOST_KEY=<base64-encoded-key>`

<Tip>
  To troubleshoot the SSH connection with hosts keys, use the `--debug` flag when running the `hoop connect` command.
  This will provide detailed information about the connection process, including any issues related to parsing the host key.
</Tip>

For more details, refer to the [environment variables documentation](/setup/configuration/env-vars).

## Known Issues

### Warp Terminal

When using Warp Terminal, you might encounter issues due to its unique handling of SSH connections.
To disable it, set this option in your bash profile or your current shell session

```sh
export WARP_USE_SSH_WRAPPER=0
```
